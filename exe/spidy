#!/usr/bin/env ruby
# frozen_string_literal: true

require 'spidy'
require 'pry'

if ARGV[1].blank?
  case ARGV[0]
  when 'version' then STDOUT.puts(Spidy::VERSION)
  when 'console' then Spidy.console
  else
    STDOUT.puts 'usage: spidy [version console]'
  end
else
  spidy = Spidy.open(ARGV[1])
  case ARGV[0]
  when 'console' then spidy.console
  when 'shell' then spidy.shell.function
  when 'call' then spidy.shell.call(ARGV[2])
  when 'each' then spidy.shell.each(ARGV[2])
  else
    STDOUT.puts 'usage: spidy [call each shell] [file]'
  end
end
